jQuery(function(e){Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++)if(this[a]==b)return a;return-1};Array.prototype.remove=function(b){for(var a=0,c,f=0;f<this.length;f++)this[f]==b&&a++;for(f=0;f<a;f++)c=this.indexOf(b),-1<c&&this.splice(c,1)};e.cloudLayer={index:1,zIndex:999999,prefix:"cloudLayer_",blurTarget:"container",screenWidth:window.screen.width,screenHeight:window.screen.height,winScrollTop:0};var d=e.cl=e.cloudLayer;e.extend(d,{Data:{layer:{},form:[],alert:[],confirm:[],
tip:[],blur:[d.blurTarget]},Tool:{clearForeLayer:function(b){for(var a=0;a<d.Data[b].length;a++)d.Data.layer[d.Data[b][a]]&&d.Data.layer[d.Data[b][a]].close&&d.Data.layer[d.Data[b][a]].close(),d.Tool.removeLayer(d.Data[b][a],b)},addLayer:function(b,a){b&&d.Data[a]&&-1==d.Data[a].indexOf(b)&&d.Data[a].push(b)},removeLayer:function(b,a){d.Data[a].remove(b)},setBone:function(b){b=b.OPTIONS;return e('<div class="cloudLayer '+b.globalClass+'" >'+(b.layerBg?'<div id="cloudLayerBg_'+b.zIndex+'" class="cloudLayerBg " style="background-color:'+
b.layerBgColor+';"></div>':"")+(b.loading?'<div class="cloudLayerLoading"><div class="cloudLayerLoadingPanel"><div class="cloudLayerLoadingPannelInner"><div class="cloudLayerLoadingFg"></div></div></div></div>':"")+'<div class="cloudLayerOutter"><div class="cloudLayerInner"><div class="cloudLayerBox">'+(b.boxBg?'<div id="cloudLayerBoxBg_'+b.zIndex+'" class="cloudLayerBoxBg" style="background-color:'+b.boxBgColor+';"></div>':"")+'<div class="cloudLayerBoxInner"></div></div></div></div></div>')}}});
var h={title:"\u64cd\u4f5c\u63d0\u793a",msg:"",zIndex:d.zIndex,tmplId:"",Dom:"",tmplData:{},hide:!1,loading:!0,layerBg:!0,layerBgBlur:!0,layerBgColor:"rgba(0, 0, 0, 0.35)",boxBg:!1,boxBgBlur:!1,boxBgColor:"rgba(255, 255, 255, 0.80)",effectTime:250,effectClass:{},delayTime:500,layerHeight:!0,unique:!1,insertBeforeFun:function(b){},insertAfterFun:function(b){},OKFun:function(b){},CancelFun:function(b){}};e.Velocity.RegisterEffect("transition.flipXIn",{defaultDuration:h.effectTime,calls:[[{opacity:1,
rotateY:[0,-55]}]]}).RegisterEffect("transition.flipXOut",{defaultDuration:h.effectTime,calls:[[{opacity:0,rotateY:55}]],reset:{rotateY:0}}).RegisterEffect("transition.bounceInRight",{defaultDuration:h.effectTime,calls:[[{opacity:.5,translateX:"-30px"}],[{opacity:1,translateX:"10px"}],[{opacity:1,translateX:"0"}]]}).RegisterEffect("transition.bounceOutRight",{defaultDuration:h.effectTime,calls:[[{opacity:1,translateX:"0px"}],[{opacity:0,translateX:"100%"}]]}).RegisterEffect("transition.bounceIn",
{defaultDuration:h.effectTime,calls:[[{opacity:0,scale:"0.3"}],[{opacity:1,scale:"1.05"}],[{opacity:1,scale:"0.9"}],[{opacity:1,scale:"1"}]]}).RegisterEffect("transition.fadeOut",{defaultDuration:h.effectTime,calls:[[{opacity:1}],[{opacity:0}]]}).RegisterEffect("transition.bounceInDown",{defaultDuration:h.effectTime,calls:[[{opacity:0,translateY:"-100%"}],[{opacity:1,translateY:"0px"}]]}).RegisterEffect("transition.bounceOutUp",{defaultDuration:h.effectTime,calls:[[{opacity:1,translateY:"0"}],[{opacity:0,
translateY:"-100%"}]]}).RegisterEffect("transition.bounceInUp",{defaultDuration:h.effectTime,calls:[[{opacity:0,translateY:"100%"}],[{opacity:.5,translateY:"-30px"}],[{opacity:1,translateY:"-10px"}],[{opacity:1,translateY:"0"}]]}).RegisterEffect("transition.bounceOutDown",{defaultDuration:h.effectTime,calls:[[{opacity:1,translateY:"0"}],[{opacity:.5,translateY:"-20px"}],[{opacity:0,translateY:"-100%"}]]});var k=function(b){var a=this,c=e.extend({},h);b=e.extend(c,b);a.initialize=function(){a.OPTIONS=
b;a.OPTIONS.unique&&d.Tool.clearForeLayer(a.OPTIONS.type);a.initBone();d.Tool.addLayer(a.CL.attr("id"),a.OPTIONS.type);d.Data.layer[a.CL.attr("id")]=a};a.initBone=function(){var f;f=d.Tool.setBone(a);b.no_padding&&f.addClass("no_padding");a.CL=f;a.CLOutter=e(".cloudLayerOutter",f);a.CLBg=e(".cloudLayerBg",f);a.CLBoxInner=e(".cloudLayerBoxInner",f);a.CLOK=e(".cloudLayerOK",f);a.CLCancel=e(".cloudLayerCancel",f);f.attr("id",d.prefix+d.index).css({"z-index":parseInt(b.zIndex)+parseInt(d.index)});b.insertBeforeFun&&
b.insertBeforeFun instanceof Function&&b.insertBeforeFun(a);a.initDom();a.insertTmplDom();a.CLBodyInner=e(".cloudLayerBodyInner",f);e("body").append(f);b.insertAfterFun&&b.insertAfterFun instanceof Function&&b.insertAfterFun(a);a.setValues();e(window).bind("resize",function(){a.setValues()});a.onEvents();a.show();a.autoClear();d.index++};a.initDom=function(){a.setHead();a.setBody();a.setFoot()};a.setBlur=function(){b.layerBgBlur&&(a.target=e("#"+d.Data.blur[d.Data.blur.length-1]),a.target&&a.target.get(0)&&
(1==d.Data.blur.length?a.target.attr("winScrollTop",e(window).scrollTop()):a.target.attr("windowScrollTop",e(".cloudLayerContainer",a.target).scrollTop()),a.target.addClass("cloudLayerBlur"),d.Tool.addLayer(a.CL.attr("id"),"blur")))};a.clearBlur=function(){b.layerBgBlur&&a.target&&a.target.get(0)&&(d.Tool.removeLayer(a.CL.attr("id"),"blur"),d.Data.blur.length&&(a.target.removeClass("cloudLayerBlur"),1==d.Data.blur.length?e(window).scrollTop(a.target.attr("winScrollTop")):e(".cloudLayerContainer",
a.target).scrollTop(a.target.attr("winScrollTop"))))};a.setHead=function(){a.CLBoxInner.append('<div class="cloudLayerHead">'+(b.CancelButton.show?'<a href="javascript:;" class="cloudLayerCancel">'+b.CancelButton.name+"</a>":"")+'<span class="cloudLayerTitle">'+b.title+"</span>"+(b.OKButton.show?'<a href="javascript:;" class="cloudLayerOK">'+b.OKButton.name+"</a>":"")+"</div>")};a.setBody=function(){a.CLBoxInner.append('<div class="cloudLayerBody"><div class="cloudLayerBodyInner"><div class="cloudLayerContainer"></div></div></div>')};
a.insertTmplDom=function(){e.tmpl&&e(".cloudLayerContainer",a.CL).height("auto").append(e("#"+b.tmplId).tmpl(b.tmplData));b.tmplDom&&e(".cloudLayerContainer",a.CL).height("auto").append(b.tmplDom);a.CL.addClass("complete")};a.setFoot=function(){};a.setValues=function(){var b,c;c=a.CL.height();e(".cloudLayerBg,.cloudLayerOutter",a.CL).height(c);b=e(".cloudLayerHead",a.CL).height();a.CLBodyInner.height(c-b);e(".cloudLayerContainer",a.CL).css({paddingBottom:"50px"})};a.show=function(){a.CL.show();setTimeout(function(){a.setBlur();
a.CLOutter.velocity(b.effectClass.In)},150)};a.close=function(c){c&&a.CL.hide();a.CLOutter.velocity(b.effectClass.Out);a.CL.delay(b.delayTime,"form").queue("form",function(c){b.hide?a.CL.hide():a.CL.remove();a.clearBlur();c()}).dequeue("form")};a.onEvents=function(){a.CL.unbind().bind("click",function(a){a.stopPropagation();a.preventDefault()}).bind("touchmove",function(a){a.stopPropagation()});a.onClose();a.onOK()};a.onClose=function(){e(".cloudLayerCancel",a.CL).unbind("click").bind("click",function(b){b.stopPropagation();
b.preventDefault();a.doClose()})};a.doClose=function(){b.CloseFun&&b.CloseFun instanceof Function&&b.CloseFun(this);a.close()};a.onOK=function(){e(".cloudLayerOK",a.CL).unbind("click").bind("click",function(b){b.stopPropagation();b.preventDefault();a.doOK()})};a.doOK=function(){b.OKFun&&b.OKFun instanceof Function&&b.OKFun(this)&&a.close()};a.autoClear=function(){}};d.form=function(b){var a={type:"form",no_padding:!1,globalClass:d.prefix+"form",layerBgColor:"#ffffff",effectClass:{In:"transition.bounceInRight",
Out:"transition.bounceOutRight"},OKButton:{name:"\u4fdd\u5b58",show:!0},CancelButton:{name:"\u53d6\u6d88",show:!0}};b&&e.extend(a,b);b=new k(a);b.initialize();return b};d.alert=function(b,a,c){if(b){var f={type:"alert",no_padding:!1,globalClass:d.prefix+"alert",layerBgBlur:!1,boxBg:!0,boxBgBlur:!0,boxBgColor:"rgba(255, 255, 255, 0.95)",effectClass:{In:"transition.bounceIn",Out:"transition.fadeOut"},OKButton:{name:"\u597d",show:!0}},g=new k(f);e.extend(g,{setHead:function(){},setBody:function(){g.CLBoxInner.append('<div class="cloudLayerBody"><div class="cloudLayerBodyInner"><div class="cloudLayerContainer">'+
b+"</div></div></div>")},setFoot:function(){g.CLBoxInner.append('<div class="cloudLayerFoot"><div class="cloudLayerFootInner"><a href="javascript:;" class="cloudLayerOK">\u597d</a></div></div>')},setValues:function(){g.CLOutter.height(g.CLBoxInner.height())},doOK:function(){g.close()},close:function(a){a&&g.CL.hide();g.CLOutter.velocity(f.effectClass.Out);g.clearBlur();g.CL.delay(f.delayTime,"alert").queue("alert",function(a){g.CL.remove();c&&c instanceof Function&&c();a()}).dequeue("alert")},autoClear:function(){setTimeout(function(){g.close()},
3E3)}});g.initialize();return g}c&&c instanceof Function&&c()};d.confirm=function(b){var a={title:"\u786e\u8ba4\u63d0\u793a",msg:"\u771f\u7684\u8981\u6267\u884c\u8be5\u64cd\u4f5c\uff1f",type:"confirm",no_padding:!1,globalClass:d.prefix+"confirm",layerBgBlur:!1,boxBg:!0,boxBgBlur:!0,boxBgColor:"rgba(255, 255, 255, 0.95)",effectClass:{In:"transition.bounceIn",Out:"transition.fadeOut"},OKButton:{name:"\u597d",show:!0},CancelButton:{name:"\u53d6\u6d88",show:!0}};b&&e.extend(a,b);var c=new k(a);e.extend(c,
{setHead:function(){var b;a.title?(b='<div class="cloudLayerHead">'+a.title+"</div>",c.CL.addClass("title")):b="";c.CLBoxInner.append(b)},setBody:function(){c.CLBoxInner.append('<div class="cloudLayerBody"><div class="cloudLayerBodyInner"><div class="cloudLayerContainer">'+a.msg+"</div></div></div>")},setFoot:function(){c.CLBoxInner.append('<div class="cloudLayerFoot"><div class="cloudLayerFootInner"><a href="javascript:;" class="cloudLayerCancel">\u53d6\u6d88</a><a href="javascript:;" class="cloudLayerOK">\u597d</a></div></div>')},
setValues:function(){c.CLOutter.height(c.CLBoxInner.height())}});c.initialize();return c};d.confirm1=function(b){var a={title:"\u6e29\u99a8\u63d0\u793a",msg:"\u4e0d\u5b58\u5728\u6b64\u5730\u5740",type:"confirm",no_padding:!1,globalClass:d.prefix+"confirm",layerBgBlur:!1,boxBg:!0,boxBgBlur:!0,boxBgColor:"rgba(255, 255, 255, 0.95)",effectClass:{In:"transition.bounceIn",Out:"transition.fadeOut"},OKButton:{name:"\u786e\u5b9a",show:!0}};b&&e.extend(a,b);var c=new k(a);e.extend(c,{setHead:function(){var b;
a.title?(b='<div class="cloudLayerHead">'+a.title+"</div>",c.CL.addClass("title")):b="";c.CLBoxInner.append(b)},setBody:function(){c.CLBoxInner.append('<div class="cloudLayerBody"><div class="cloudLayerBodyInner"><div class="cloudLayerContainer">'+a.msg+"</div></div></div>")},setFoot:function(){c.CLBoxInner.append('<div class="cloudLayerFoot"><div class="cloudLayerFootInner"><a href="javascript:;" class="cloudLayerCancel">\u786e\u5b9a</a></div></div>')},setValues:function(){c.CLOutter.height(c.CLBoxInner.height())}});
c.initialize();return c};d.tip=function(b,a){if(b){var c={type:"tip",no_padding:!1,globalClass:d.prefix+"tip",layerBg:!1,layerBgBlur:!1,boxBg:!0,boxBgBlur:!0,layerHeight:!1,unique:!0,boxBgColor:"rgba(0, 0, 0, 0.75)",effectClass:{In:"transition.bounceInDown",Out:"transition.bounceOutUp"},time:a||3E3},f=new k(c);e.extend(f,{setBlur:function(){},setHead:function(){f.CLBoxInner.append('<div class="cloudLayerHead">'+b+"</div>")},setBody:function(){},setFoot:function(){},setValues:function(){f.CLOutter.height(f.CLBoxInner.height())},
doOK:function(){f.close()},close:function(a){a&&f.CL.hide();f.CLOutter.velocity(c.effectClass.Out);f.clearBlur();f.CL.delay(c.delayTime,"tip").queue("tip",function(a){f.CL.remove();a()}).dequeue("tip")},autoClear:function(){setTimeout(function(){f.close()},c.time)}});f.initialize();return f}};d.goods=function(b){var a={type:"goods",no_padding:!1,globalClass:d.prefix+"goods",layerBgColor:"rgba(255, 255, 255, 1.80)",effectClass:{In:"transition.bounceInRight",Out:"transition.bounceOutRight"},OKButton:{name:"\u6dfb\u52a0",
show:!0},CancelButton:{name:"\u8fd4\u56de",show:!0}};b&&e.extend(a,b);var c=new k(a);e.extend(c,{setHead:function(){c.CLBoxInner.append(a.title?'<div class="cloudLayerHead"><a href="javascript:;" class="cloudLayerCancel">'+a.CancelButton.name+'</a><span class="cloudLayerTitle">'+a.title+"</span></div>":"")},setFoot:function(){}});c.initialize();return c};d.cart=function(b){var a={type:"cart",no_padding:!1,globalClass:d.prefix+"cart",layerBgColor:"rgba(255, 255, 255, 1.80)",effectClass:{In:"transition.bounceInUp",
Out:"transition.bounceOutDown"},OKButton:{name:"\u6dfb\u52a0",show:!0},CancelButton:{name:"\u8fd4\u56de",show:!0}};b&&e.extend(a,b);var c=new k(a);e.extend(c,{setHead:function(){c.CLBoxInner.append(a.title?'<div class="cloudLayerHead"><a href="javascript:;" class="cloudLayerCancel">'+a.CancelButton.name+'</a><span class="cloudLayerTitle">'+a.title+'</span><a href="javascript:;" class="cloudLayerOK">'+a.OKButton.name+"</a></div>":"")},setFoot:function(){}});c.initialize();return c};d.ImageCrop=function(b){var a=
{type:"ImageCrop",no_padding:!1,globalClass:d.prefix+"ImageCrop",layerBgColor:"rgba(255, 255, 255, 1.80)",effectClass:{In:"transition.bounceInUp",Out:"transition.bounceOutDown"},OKButton:{name:"\u9009\u53d6",show:!0},CancelButton:{name:"\u53d6\u6d88",show:!0}};b&&e.extend(a,b);var c=new k(a);e.extend(c,{setHead:function(){},setFoot:function(){c.CLBoxInner.append('<div class="cloudLayerFoot"><a class="cloudLayerOK" href="javascript:;">'+a.OKButton.name+'</a><div class="cloudLayerOpeBox"><a class="rotate-btn left" id="rotate-to-left">\u5de6\u8f6c</a></div><div class="cloudLayerOpeBox"><a class="rotate-btn right" id="rotate-to-right">\u53f3\u8f6c</a></div><a class="cloudLayerCancel" href="javascript:;">'+
a.CancelButton.name+"</a></div>")}});c.initialize();return c};d.pay=function(b){var a={title:"\u9009\u62e9\u652f\u4ed8\u65b9\u5f0f",type:"Pay",no_padding:!1,globalClass:d.prefix+"Pay",layerBgColor:"rgba(255, 255, 255, 1.80)",effectClass:{In:"transition.bounceInUp",Out:"transition.bounceOutDown"},OKButton:{name:"\u7acb\u5373\u652f\u4ed8",show:!0},CancelButton:{name:"\u53d6\u6d88",show:!0}};b&&e.extend(a,b);var c=new k(a);e.extend(c,{setHead:function(){c.CLBoxInner.append(a.title?'<div class="cloudLayerHead"><span class="cloudLayerTitle">'+
a.title+'</span><a href="javascript:;" class="cloudLayerCancel">'+a.CancelButton.name+"</a></div>":"")},setFoot:function(){c.CLBoxInner.append('<div class="cloudLayerFoot"><div class="cloudLayerFootInner"><a href="javascript:;" class="cloudLayerOK disabled">'+a.OKButton.name+"</a></div></div>")},setValues:function(){var a,b,d;b=c.CL.height();a=e(".cloudLayerHead",c.CL).height();d=e(".cloudLayerFoot",c.CL).height();c.CLBodyInner.height(b-a-d)}});c.initialize();return c}});
