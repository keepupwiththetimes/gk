<include FILE="Public:header"/>
<!--<META HTTP-EQUIV="pragma" CONTENT="no-cache"> -->
<!--<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate"> 
<META HTTP-EQUIV="expires" CONTENT="0">-->
<link rel="stylesheet" type="text/css" href="__Home_CSS__/zsh2.0/animate.min.css"/>
<link rel="stylesheet" type="text/css" href="__Home_CSS__/zsh2.0/pikaday.css"/>
<link rel="stylesheet" type="text/css" href="__Home_CSS__/zsh2.0/jquery.hiSlider.css"/>
<script src="__Home_JS__/zsh2.0/jquery.hiSlider.js" type="text/javascript"></script>
<script type="text/javascript">
	
	function nofind(){ 
			var img=event.srcElement;

			img.src="__Home_IMG__/zsh2.0/zhWelcome/default.jpg";

			img.onerror=null; //控制不要一直跳动
	}

    document.addEventListener('touchmove', function (e) {
        e.preventDefault();
    });
    
      
    function sharenew(link,img,imagename){
      	wx.ready(function () {
          wx.onMenuShareTimeline({
              title: '{$SHARE["title"]}', // 分享标题
              link: link, // 分享链接
              imgUrl: img, // 分享图标
              success: function () {
              
                  // 用户确认分享后执行的回调函数
                  var url  = "{:U('Home/Ajax/logShareCount')}";
                  var data = '1';
                  $.post(url,{sharenum:data,picture:imagename},function(res){});
       
              },
              cancel: function () {
                  // 用户取消分享后执行的回调函数
              }
          });

          wx.onMenuShareAppMessage({
              title: '{$SHARE["title"]}', // 分享标题
              desc: '{$SHARE["desc"]}', // 分享描述
              link: link, // 分享链接
              imgUrl: img, // 分享图标
              type: '', // 分享类型,music、video或link，不填默认为link
              dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
              success: function () {
                  // 用户确认分享后执行的回调函数
          
                  var url  = "{:U('Home/Ajax/logShareCount')}";
                  var data = '1';
                  $.post(url,{sharenum:data,picture:imagename},function(res){}); 
              
              },
              cancel: function () {
                  // 用户取消分享后执行的回调函数
              }
          });
      });
    }

</script>
<style type="text/css">
    * {
        margin: 0px;
        padding: 0px;
    }

    html, body {
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    #mid {
        position: absolute;
        left: 0%;
        top: 0%;
        width: 100%;
        height: 100%;
    }

    .hiSlider-wrap {
        height: 100%;
    }

    .hiSlider {
        height: 100%;
    }

    .hiSlider-item img {
        height: 100%;
        width: 100%;
    }

    .st-bottom {
        display: inline-block;
        position: absolute;
        z-index: 19;
        bottom: 2%;
        /*padding-right: 2%;*/
        padding-top: 1.5%;
        height: 40px;
        background-color: rgba(255, 255, 255, 0.65);
        border-top-right-radius: 5px;
        border-bottom-right-radius: 5px;
    }

    .st-bottom span {
        border-radius: 5px;
    }

    .ck-num {
        display: inline-block;
        margin-left: 4%;
    }

    div.s-close i {
        display: table-cell;
        height: 100%;
        width: 100%;
        color: #DADADA;
        font-size: 1.5rem;
        vertical-align: middle;
        background-color: #B1B1B1;
        border-bottom-left-radius: 100%;
    }

    .point-container .point-word {
        width: 90%;
    }

    .sc-close {
        display: table;
        width: 40px;
        height: 40px;
        /*float: right;*/
       position: fixed;
       top: 5%;
       right: 5%;
    }
	.sc-close img{
		width: 100%;
	}
    

    .bg-cleandar {
        display: none;
        position: absolute;
        bottom: 0%;
        width: 100%;
        height: 100%;
        text-align: center;
        background-color: rgba(0,0,0,0.3);
        overflow: hidden;
    }
	.celeander{
		position: absolute;
        bottom: 0%;
        width: 100%;
        height: 100%;
	}
	
	.bg-celeander2{
		/*display: none;*/
        position: absolute;
        bottom: 0%;
        width: 100%;
        height: 100%;
        /*background-color: white;*/
       background: url("__Home_IMG__/wheel2/ZHCJ/date_bg.png") no-repeat;
       background-size: 100% 95%;
        text-align: center;
	}
	
	.pika-table{
		height: 80%;
	}
    .pika-table tr td:nth-last-child(1) {
        border-right: 1px solid #EFEFEF;
    }

    .pika-table tr:nth-last-child(1) td:nth-last-child(1) {
        /*border-right: none;
        border-bottom: none;
        background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAABXCAMAAABVwWmqAAAAS1BMVEUAAADW19bW19bW19bW19bW19bW19bW19bW19bW19bW19bW19bW19bW19b////W19b4+PjZ2dnf39/8/f3w8PDm5uX09fTb29vr6+rpvULRAAAADnRSTlMAEDDQ8aBgwOKIcFBAIBTL7HIAAAFFSURBVGjetdhbSkNRFATRTnxr9FyT62P+I5WACkJiiXW6BrA+m83OU6vDflxuU/OXtyNf85fncbEN+I7fBHzL1/z1ky/56xhXX3w6fL7r8D3/5Sef+fx9wHf8dcC3PPhm0Y48+HYwwbd8zV9O85m2aKf5zBxM8C1f81/P85mzaDebgG8HU/iC9/7773z8ot0FfDuYwhe89w/MJ24wH0LJPcbKfNz5zbnzm3N7zJX5uPObc+c35/aYK/Nx5zfnzm/O7TFX5uPOb84NJlfm485v7s+LdvsvPm4wuTIfd35z7vzm3GByZT7u/Obc+c3xYLrKfGiPbXB+62CPdWU+cH7rzg7mY6YEe6wDvuCvYyIfOL91sMe6Mh84v3UwmLoyH3iH6GDudTCYujIfOL91cH7rYDB1ZT5wfuvg/NbtYdFsZT67XZp9ACVa4pBtVJkJAAAAAElFTkSuQmCC');
        background-size: 96% 100%;*/
    }

    .pika-table tr:nth-last-child(1) td:nth-last-child(1) > button {
        /*background: none;*/
    }

    .pika-table tr:nth-last-child(1) td:nth-last-child(2) {
        /*background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAABWCAMAAABxX9ExAAAAM1BMVEXW19b////m5+fh4eLp6urr7Ozi4+Pk5OX09fXv7+/t7u7y8vLw8fH7/Pz5+fn29/fW19Y8R99NAAAAAXRSTlNANjqZ9gAAAQdJREFUWMPV1LuyAiEQRVHlMTQ0p/v+/9detSyTMXQHc4p4bYqA251bHBXkVSrJt0rys5K8HSQfB8lrkLzaQfJrkPweJG+D5FVQvqB8R/ldSN4KyWcheTWU74XkVyN5bySfjeSjkbw6yq9G8ruTvHeSj07y6iSvhfK7k7wvkrdF8rFIXpPkNVHeUd4myeck+dgkL0d53yRvm+TTST6c5OUkL0N5c5JPlA8jeRnJy0heifJpJB9G8pEkryR5JcoHykeSfKC8UF6B8oHygfJCeaG8rswL5YXyujIvlNed5S98ez3OlR/nk0D4c+cZQfjzL/fsAPw5lWZ7zi98/e0e7Hjtzf+hu7H7B3EiZ20g6bcJAAAAAElFTkSuQmCC');
        background-size: cover;*/
    }

    .zan, .music, .chistory ,.backhistory{
        display: inline-block;
        width: 40px;
        text-align: center;
         position: relative;
    	top: -4px;
    }

     .music i, .chistory i ,.backhistory i{
        color: #737270;
        display: block;
        font-size: 1.5rem;
    }
	
	.zan i{
        display: block;
        font-size: 1.5rem;
	}
	
	.fa-heart-o{
		color: rgb(115,114,112);
	}
	
	.fa-heart{
		color: #FD4E4E;
	}
	
    .zan span, .music span, .chistory span,.backhistory span {
        display: block;
        color: #737270;
        font-family: arial;
        margin-top: 1px;
        font-size: 0.5rem;
    }
	.fa-home{
		font-size: 1.8rem !important;
		position: relative;
		top: 4px;
	}
    .day-signed {
        background-color: white;
        color: #999;
    }

    .hiSlider-pages {
        display: none;
    }

    .hiSlider-title {
        display: none;
    }

    .hiSlider-btn-prev, .hiSlider-btn-next {
        display: none;
    }

    .hiSlider-item {
        height: 102%;
        float: none;
    }
    @keyframes voice{
		0% {background-position-x: 300%;}
		100% {background-position-x: 0%;}
	}
			
	@-webkit-keyframes voice{
		0% {background-position-x: 300%;}
		100% {background-position-x: 0%;}
	}
	
    .music i {
        display: inline-block;
        height: 100%;
        width: 28px%;     
        background-size: 300% 100%;
        animation: voice 1s infinite steps(3);
		-webkit-animation: voice 1s infinite steps(3);
    }
    .point-container .point-word{
    	padding-left: 5%;
    }
    .pika-single.is-bound{
    	width: 73%;
    	left: 7%;
    	top: 34%;
    	height: 47%;
    	padding: 7% 6%;
    	border-radius: 10px;
    	overflow: hidden;
    }
    .pika-table th{
    	border: 1px solid #E6F1FD;
    }
	.pika-title{
		left: 0;
	}
	
	.zan .inline {
		display: inline;
	}
	.zan .hide1 {
		display: none;
	}
	.pika-table th, .pika-table td{
		border: 0;
		position: relative;
	}
	.pika-table tr td:nth-last-child(1){
		border: 0;
	}
	.is-selected .day-signed{
		color: white;
		width: 24px;
		height: 24px;
		background-color: rgb(122,190,218);
		border: 1px solid rgb(122,190,218);
		border-radius: 12px;
		position: absolute;
		left: 0;
		right: 0;
		top: 0;
		bottom: 0;
		margin: auto;
	}
	.pika-table .signing{
		color: #999;
		background: url("__Home_IMG__/wheel2/ZHCJ/signing_bg.png") no-repeat;
		background-size: 100% 100%;
		border: none;
		width: 100%;
		height: 100%;
	}
	.is-today .pika-button{
		background: url("__Home_IMG__/wheel2/ZHCJ/today_bg.png") no-repeat;
		background-size: 100% 100%;
		color: #999;
		font-weight: bold;
	}
	.pika-title{
		background-color: rgb(122,190,218);
	}
	.pika-table th {
		background-color: white;
	}
	@-webkit-keyframes move1 {
		20% {
			-webkit-transform: rotate3d(0, 0, 1, 10deg);
			transform: rotate3d(0, 0, 1, 10deg)
		}
		40% {
			-webkit-transform: rotate3d(0, 0, 1, -6deg);
			transform: rotate3d(0, 0, 1, -6deg)
		}
		60% {
			-webkit-transform: rotate3d(0, 0, 1, 3deg);
			transform: rotate3d(0, 0, 1, 3deg)
		}
		80% {
			-webkit-transform: rotate3d(0, 0, 1, -3deg);
			transform: rotate3d(0, 0, 1, -3deg)
		}
		100% {
			-webkit-transform: rotate3d(0, 0, 1, 0deg);
			transform: rotate3d(0, 0, 1, 0deg)
		}
	}
	
	@keyframes move1 {
		20% {
			-webkit-transform: rotate3d(0, 0, 1, 10deg);
			transform: rotate3d(0, 0, 1, 10deg)
		}
		40% {
			-webkit-transform: rotate3d(0, 0, 1, -6deg);
			transform: rotate3d(0, 0, 1, -6deg)
		}
		60% {
			-webkit-transform: rotate3d(0, 0, 1, 3deg);
			transform: rotate3d(0, 0, 1, 3deg)
		}
		80% {
			-webkit-transform: rotate3d(0, 0, 1, -3deg);
			transform: rotate3d(0, 0, 1, -3deg)
		}
		100% {
			-webkit-transform: rotate3d(0, 0, 1, 0deg);
			transform: rotate3d(0, 0, 1, 0deg)
		}
	}
	
	.swing {
		-webkit-transform-origin:43.5% 13% ;
		-ms-transform-origin: 43.5% 13% ;
		transform-origin: 43.5% 13% ;
		-webkit-animation-name: move1;
		animation-name: move1;
		-webkit-animation: move1 1.2s;
		animation: move1 1.2s;
		-webkit-animation-delay:0.3s;
		animation-delay:0.3s;
	}
	.circleDot{
		width: 13%;
		position: absolute;
		top: 2.7%;
		left: 42%;
	}
	.leftDot{
		width: 20px;
		height: 20px;
		border-radius: 10px;
		background-color: white;
		position: absolute;
		top: 30%;
		left: 4%;
	}
	.rightDot{
		width: 20px;
		height: 20px;
		border-radius: 10px;
		background-color: white;
		position: absolute;
		top: 30%;
		right: 4%;
	}
	.hiSlider-wrap>a>i{
		font-size: 2rem;
        color: #737270;
	}
</style>

</head>
<body>
<div id="mid">
    <ul class="hiSlider hiSlider3">
        <li class="hiSlider-item"><img src="{$imgurl}" onerror="nofind()"></li>
    </ul>
</div>
<?php if(!isset($hide)):?>
    <div class="st-bottom" id="st-bottom">
        <if condition="$flag eq 1">
            <if condition = "$state eq 1">
                <div class="zan">
                    <?php if($res['thumbup'] == 0):?>
                        <!--<i class="fa fa-heart-o" id="zan"></i>-->
                        <i class="fa fa-heart-o icon animated" id="zan"
								style="position: relative;"> <i
								class="fa fa-heart icon animated hide1"
								style="position: absolute; top: 0; left: 8px;"></i>
							</i>
                    <?php else:?>
                        <!--<i class="fa fa-heart" id="zan"></i>-->
                        <i class="fa fa-heart icon animated" id="zan"
								style="position: relative;"> <i
								class="fa fa-heart icon animated hide1"
								style="position: absolute; top: 0; left: 8px;"></i>
							</i>
                    <?php endif;?>
                    <span class="ck-num">{$res.totalthumbup}</span>
                </div>
            <else />
                <div class="zan">
                    <?php if($res['thumbup'] == 0):?>
                        <!--<i class="fa fa-heart-o"></i>-->
                        <i class="fa fa-heart-o icon animated"
								style="position: relative;"> <i
								class="fa fa-heart icon animated hide1"
								style="position: absolute; top: 0; left: 8px;"></i>
							</i>
                    <?php else:?>
                        <!--<i class="fa fa-heart"></i>-->
                        <i class="fa fa-heart icon animated"
								style="position: relative;"> <i
								class="fa fa-heart icon animated hide1"
								style="position: absolute; top: 0; left: 8px;"></i>
							</i>
                    <?php endif;?>
                    <span class="ck-num">{$res.totalthumbup}</span>
                </div>
            </if>



            <div class="chistory">
                <i class="fa fa-calendar"></i>
                <span class="calendarg">历史签</span>
            </div>

            <div class="music" id="music" style="display: none;">
                <i class="fa fa-volume-up"></i>
                <span class="p-volice">播放</span>
                <audio id="m-play" onended="changeState(this);" preload="auto">
                    <source src="{$musicurl}"></source>
                </audio>
            </div>
            <div class="backhistory">
            	<i class="fa fa-home"></i>
            	<span class="b-back">首页</span>
            </div>
            <else />
            <div class="chistory">
                <i class="fa fa-calendar"></i>
                <span class="calendarg">历史签</span>
            </div>
            <div class="music" id="music" style="display: none;">
                <i class="fa fa-volume-up"></i>
                <span class="p-volice">播放</span>
                <audio id="m-play" onended="changeState(this);" preload="auto">
                    <source src="{$musicurl}"></source>
                </audio>
            </div>
            <div class="backhistory">
            	<i class="fa fa-home"></i>
            	<span class="b-back">首页</span>
            </div>
        </if>

    </div>
<?php endif;?>

<div class="bg-cleandar" id="bg-cleandar">
 	<div id="celeander" class="celeander"></div>
 	<div id="bg-celeander2" class="bg-celeander2">
 		<div class="sc-close">
 			<img src="__Home_IMG__/zsh2.0/order/close.png"/>
 		</div>
 		<img src="__Home_IMG__/wheel2/ZHCJ/circle.png" class="circleDot"/>
 		<p class="leftDot"></p>
 		<p class="rightDot"></p>
 	</div>
    
    <input type="text" id="datepicker"/>
   

</div>

<script type="text/javascript">

    window.sendRequest = true;
    var mainData = {};
    var isdz = true;
    var isslider = true;
    var mainArray = [];
    var myDate = new Date();
    var myYear = myDate.getFullYear();
    var myMont = myDate.getMonth() +1;
    var time1 = new Date().getTime();
    var picname = $('.hiSlider-item img').attr('src');
	var index = picname.lastIndexOf("\/");  
	picname = picname.substring(index + 1, picname.length);

    shareimgUrl = '{$imgurl}';
	sharenew(sharelink,shareimgUrl,picname);
	
	function changeState(ev){
		ev.pause();
        ev.currentTime = 0;
        $('.music i').attr('class','fa fa-volume-up');
        $('.music i').css('color', 'rgb(115, 114, 112)'); 
        $('.music i').css('background', 'none');
	}

    (function (e, t) {
        "use strict";
        var n;
        if (typeof exports == "object") {
            try {
                n = require("moment")
            } catch (r) {
            }
            module.exports = t(n)
        } else typeof define == "function" && define.amd ? define(function (e) {
                var r = "moment";
                return n = e.defined && e.defined(r) ? e(r) : undefined, t(n)
            }) : e.Pikaday = t(e.moment)
    })(this, function (e) {
        "use strict";
        var t = typeof e == "function",
            n = !!window.addEventListener,
            r = window.document,
            i = window.setTimeout,
            s = function (e, t, r, i) {
                n ? e.addEventListener(t, r, !!i) : e.attachEvent("on" + t, r)
            },
            o = function (e, t, r, i) {
                n ? e.removeEventListener(t, r, !!i) : e.detachEvent("on" + t, r)
            },
            u = function (e, t, n) {
                var i;
                r.createEvent ? (i = r.createEvent("HTMLEvents"), i.initEvent(t, !0, !1), i = y(i, n), e.dispatchEvent(i)) : r.createEventObject && (i = r.createEventObject(), i = y(i, n), e.fireEvent("on" + t, i))
            },
            a = function (e) {
                return e.trim ? e.trim() : e.replace(/^\s+|\s+$/g, "")
            },
            f = function (e, t) {
                return (" " + e.className + " ").indexOf(" " + t + " ") !== -1
            },
            l = function (e, t) {
                f(e, t) || (e.className = e.className === "" ? t : e.className + " " + t)
            },
            c = function (e, t) {
                e.className = a((" " + e.className + " ").replace(" " + t + " ", " "))
            },
            h = function (e) {
                return /Array/.test(Object.prototype.toString.call(e))
            },
            p = function (e) {
                return /Date/.test(Object.prototype.toString.call(e)) && !isNaN(e.getTime())
            },
            d = function (e) {
                return e % 4 === 0 && e % 100 !== 0 || e % 400 === 0
            },
            v = function (e, t) {
                return [31, d(e) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][t]
            },
            m = function (e) {
                p(e) && e.setHours(0, 0, 0, 0)
            },
            g = function (e, t) {
                return e.getTime() === t.getTime()
            },
            y = function (e, t, n) {
                var r, i;
                for (r in t) {
                    i = e[r] !== undefined;
                    if (i && typeof t[r] == "object" && t[r].nodeName === undefined) p(t[r]) ? n && (e[r] = new Date(t[r].getTime())) : h(t[r]) ? n && (e[r] = t[r].slice(0)) : e[r] = y({}, t[r], n);
                    else if (n || !i) e[r] = t[r]
                }
                return e
            },
            b = {
                field: null,
                bound: undefined,
                format: "YYYY-MM-DD",
                defaultDate: null,
                setDefaultDate: !1,
                firstDay: 0,
                minDate: null,
                maxDate: null,
                yearRange: 10,
                minYear: 0,
                maxYear: 9999,
                minMonth: undefined,
                maxMonth: undefined,
                isRTL: !1,
                yearSuffix: "",
                showMonthAfterYear: !1,
                numberOfMonths: 1,
                i18n: {
                    previousMonth: "Previous Month",
                    nextMonth: "Next Month",
                    months: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"],
                    monthsShort: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"],
                    weekdays: ["日", "一", "二", "三", "四", "五", "六"],
                    weekdaysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]
                },
                onSelect: null,
                onOpen: null,
                onClose: null,
                onDraw: null
            },
            w = function (e, t, n) {
                t += e.firstDay;
                while (t >= 7) t -= 7;
                return n ? e.i18n.weekdaysShort[t] : e.i18n.weekdays[t]
            },
            E = function (e, t, n, r, i) {
                if (i) return '<td class="is-empty"></td>';
                var s = [];
                return r && s.push("is-disabled"), n && s.push("is-today"), t && s.push("is-selected"), '<td data-day="' + e + '" class="' + s.join(" ") + '"><button class="pika-button" type="button">' + e + "</button>" + "</td>"
            },
            S = function (e, t) {
                return "<tr>" + (t ? e.reverse() : e).join("") + "</tr>"
            },
            x = function (e) {
                return "<tbody>" + e.join("") + "</tbody>"
            },
            T = function (e) {
                var t, n = [];
                for (t = 0; t < 7; t++) n.push('<th scope="col"><abbr title="' + w(e, t) + '">' + w(e, t, !0) + "</abbr></th>");
                return "<thead>" + (e.isRTL ? n.reverse() : n).join("") + "</thead>"
            },
            N = function (e) {
                var t, n, r, i = e._o,
                    s = e._m,
                    o = e._y,
                    u = o === i.minYear,
                    a = o === i.maxYear,
                    f = '<div class="pika-title">',
                    l, c, p = !0,
                    d = !0;
                for (r = [], t = 0; t < 12; t++) r.push();
                l = '<div class="pika-label">' + i.i18n.months[s] + '&nbsp;&nbsp;月<div class="pika-select pika-select-month">' + r.join("") + "</div></div>", h(i.yearRange) ? (t = i.yearRange[0], n = i.yearRange[1] + 1) : (t = o - i.yearRange, n = 1 + o + i.yearRange);
//			for(r = []; t < n && t <= i.maxYear; t++) t >= i.minYear && r.push('<option value="' + t + '"' + (t === o ? " selected" : "") + ">" + t + "</option>");
                return c = '<div class="pika-label">' + o + i.yearSuffix + '&nbsp;&nbsp;年<div class="pika-select pika-select-year">' + r.join("") + "</div></div>", i.showMonthAfterYear ? f += c + l : f += c + l, u && (s === 0 || i.minMonth >= s) && (p = !1), a && (s === 11 || i.maxMonth <= s) && (d = !1), f += '<button class="pika-prev' + (p ? "" : " is-disabled") + '" type="button">' + i.i18n.previousMonth + "</button>" + '<button class="pika-prev' + (p ? "" : " is-disabled") + '" type="button">' + i.i18n.previousMonth + "</button>", f += '<button class="pika-next' + (d ? "" : " is-disabled") + '" type="button">' + i.i18n.nextMonth + "</button>" + '<button class="pika-next' + (d ? "" : " is-disabled") + '" type="button">' + i.i18n.nextMonth + "</button>", f += "</div>"
            },
            C = function (e, t) {
                return '<table cellpadding="0" cellspacing="0" class="pika-table">' + T(e) + x(t) + "</table>"
            },
            k = function (o) {
                var u = this,
                    a = u.config(o);
                u._onMouseDown = function (e) {
                	var buttons = document.querySelectorAll("button");
                	for (var k=0; k<buttons.length; k++){
                		buttons[k].style.color = "#999";
                		buttons[k].style.backgroundColor = "#fff";
                		buttons[k].style.border = "0";
                		buttons[k].style.borderRadius = "0";
                	}
                	$(".pika-prev").css("background-color","transparent");
                	$(".pika-next").css("background-color","transparent");
                    if (!u._v) return;
                    e = e || window.event;
                    var t = e.target || e.srcElement;
                    if (!t) return;
                    if (!f(t, "is-disabled")) {
                        if (f(t, "pika-button") && !f(t, "is-empty")) {
                            $(".fly").remove();
                        	if ($(t).attr("class") == "day-signed pika-button"){
                        		$(t).css({"color":"white","width":"24px","height":"24px","background-color":"rgb(122,190,218)",
                        		"border": "1px solid rgb(122,190,218)","border-radius": "12px","position": "absolute","left": "0",
                        		"right": "0","top": "0","bottom": "0","margin": "auto"});
                        	}
                            u.setDate(new Date(u._y, u._m, parseInt(t.innerHTML, 10))), a.bound && i(function () {
//							u.hide()
                            }, 100);
                            return
                        }
                        f(t, "pika-prev") ? u.prevMonth() : f(t, "pika-next") && u.nextMonth()
                    }
                    if (!f(t, "pika-select")) {
                        if (!e.preventDefault) return e.returnValue = !1, !1;
//					e.preventDefault()
                    } else u._c = !0
                }, u._onChange = function (e) {
                    e = e || window.event;
                    var t = e.target || e.srcElement;
                    if (!t) return;
                    f(t, "pika-select-month") ? u.gotoMonth(t.value) : f(t, "pika-select-year") && u.gotoYear(t.value)
                }, u._onInputChange = function (n) {
                    var r;
                    if (n.firedBy === u) return;
                    t ? (r = e(a.field.value, a.format), r = r && r.isValid() ? r.toDate() : null) : r = new Date(Date.parse(a.field.value)), u.setDate(p(r) ? r : null), u._v || u.show()
                }, u._onInputFocus = function () {
                    u.show()
                }, u._onInputClick = function () {
                    u.show()
                }, u._onInputBlur = function () {
                    u._c || (u._b = i(function () {
                        u.hide()
                    }, 50)), u._c = !1
                }, u._onClick = function (e) {
					
                    e = e || window.event;
                    var t = e.target || e.srcElement,
                        r = t;
                    if (!t) return;
                    !n && f(t, "pika-select") && (t.onchange || (t.setAttribute("onchange", "return;"), s(t, "change", u._onChange)));
                    do
                        if (f(r, "pika-single")) return;
                    while (r = r.parentNode);
                    u._v && t !== a.trigger && u.hide()

                }, u.el = r.createElement("div"), u.el.className = "pika-single" + (a.isRTL ? " is-rtl" : ""), s(u.el, "mousedown", u._onMouseDown, !0), s(u.el, "change", u._onChange), a.field && (a.bound ? r.body.appendChild(u.el) : a.field.parentNode.insertBefore(u.el, a.field.nextSibling), s(a.field, "change", u._onInputChange), a.defaultDate || (t && a.field.value ? a.defaultDate = e(a.field.value, a.format).toDate() : a.defaultDate = new Date(Date.parse(a.field.value)), a.setDefaultDate = !0));
                var l = a.defaultDate;
                
                $(".pika-single").appendTo(".bg-celeander2");
                p(l) ? a.setDefaultDate ? u.setDate(l, !0) : u.gotoDate(l) : u.gotoDate(new Date), a.bound ? (this.hide(), u.el.className += " is-bound", s(a.trigger, "click", u._onInputClick), s(a.trigger, "focus", u._onInputFocus), s(a.trigger, "blur", u._onInputBlur)) : this.show()
                    , u.show();
            };
        return k.prototype = {
            config: function (e) {
                this._o || (this._o = y({}, b, !0));
                var t = y(this._o, e, !0);
                t.isRTL = !!t.isRTL, t.field = t.field && t.field.nodeName ? t.field : null, t.bound = !!(t.bound !== undefined ? t.field && t.bound : t.field), t.trigger = t.trigger && t.trigger.nodeName ? t.trigger : t.field;
                var n = parseInt(t.numberOfMonths, 10) || 1;
                t.numberOfMonths = n > 4 ? 4 : n, p(t.minDate) || (t.minDate = !1), p(t.maxDate) || (t.maxDate = !1), t.minDate && t.maxDate && t.maxDate < t.minDate && (t.maxDate = t.minDate = !1), t.minDate && (m(t.minDate), t.minYear = t.minDate.getFullYear(), t.minMonth = t.minDate.getMonth()), t.maxDate && (m(t.maxDate), t.maxYear = t.maxDate.getFullYear(), t.maxMonth = t.maxDate.getMonth());
                if (h(t.yearRange)) {
                    var r = (new Date).getFullYear() - 10;
                    t.yearRange[0] = parseInt(t.yearRange[0], 10) || r, t.yearRange[1] = parseInt(t.yearRange[1], 10) || r
                } else t.yearRange = Math.abs(parseInt(t.yearRange, 10)) || b.yearRange, t.yearRange > 100 && (t.yearRange = 100);
                return t
            },
            toString: function (e) {
                if (!p(this._d)) return "";
                var n = this._d.getFullYear(),
                    r = this._d.getMonth() + 1,
                    i = this._d.getDate();

                if (r < 10) {
                    r = '0' + r;
                }
                if (i < 10) {
                    i = '0' + i;
                }

                var sday = n + '-' + r + '-' + i;
                var url = "{:U('Home/Wheel/getSignCalendar')}";
                //获取日期参数
                
                var yemo = n + '-' + r;
                var dtime = {sign_date: yemo};
                var isCome = true;

                var nowday = new Date();
                var nowyear = nowday.getFullYear();
                var nowmon = nowday.getMonth() + 1;
                var nowtoday = nowday.getDate();
                if (nowmon < 10) {
                    nowmon = '0' + nowmon;
                }
                if (nowtoday < 10) {
                    nowtoday = '0' + nowtoday;
                }
                n = n.toString();
                r = r.toString();
                i = i.toString();
                nowyear = nowyear.toString();
                nowmon = nowmon.toString();
                nowtoday = nowtoday.toString();
				
                var ckday = n + r + i;
                var cktoday = nowyear + nowmon + nowtoday;
                ckday = parseInt(ckday);
                cktoday = parseInt(cktoday);
                window.sessionStorage.setItem("time",ckday);
                
                if (ckday ==cktoday) {
                	
                	$('.pika-single').hide();
                	$('.bg-cleandar').hide();
                	var lourl = "{:U('Home/Wheel/signPicture/daily/1')}";
                	return window.location.href = lourl;
                }
                
                if (mainArray.length == 0) {
                	
                if (ckday > cktoday) {
                    showMsg("来年此时,记得来看我");
                    return;
                }
                
                
                	showMsg('那年今日,我们未曾相遇');
                                   isCome = false;
                                    return;
                }
                
                if (mainArray.length != 0) {
                	$.each(mainArray, function (k, v) {

                                if ($.inArray(sday, mainArray) == '-1') {

                                    showMsg('那年今日,我们未曾相遇');
                                    isCome = false;
                                    return;
                                }
                            });
                }
                
                
                if (ckday > cktoday) {
                    showMsg("来年此时,记得来看我");
                    return;
                } else {

                    //数据请求
//                  $.post(url, dtime, function (data) {
//						
//						mainArray = data.sign_date;
//						
//                      if (data.code == '1') {
//                          //将数组
//                          if (data.sign_date.length == 0) {
//                              showMsg('那年今日,我们未曾相遇');
//                              isCome = false;
//                              return;
//                          }
//
//                          $.each(data.sign_date, function (k, v) {
//
//                              if ($.inArray(sday, data.sign_date) == '-1') {
//
//                                  showMsg('那年今日,我们未曾相遇');
//                                  isCome = false;
//                                  return;
//                              }
//                          });
//
//
//                      }
//                  }, 'json');

                    if (isCome) {
                        var urlt = "{:U('Home/Wheel/getDateSignDetail')}";
                        var pda = {time: sday};
						
                        $.post(urlt, pda, function (response_data, status) {
                            mainData = response_data;
							
							if (mainData.flag =='1') {	
								var exz = document.getElementsByClassName('zan')[0];
							
							if (!exz) {
								$('#st-bottom').prepend('<div class="zan"><i class="fa fa-heart" id="zan"></i><span class="ck-num">5</span></div>');
							}
							
							}
							
							if (mainData.flag == '0') {
								$('.zan').remove();
							}
							
							
                            var simage = '';
                            isdz = mainData.state;

                            if (mainData.data.length == 1) {
                                for (var i = 0; i < mainData.data.length; i++) {
                                    simage = simage + '<ul class="hiSlider hiSlider3"><li class="hiSlider-item"><img src=' + mainData.data[i].picture + ' onerror = "nofind()"></li></ul>';
                                }

                                $('#mid').html(simage);
								isslider = false;
                                $('.pika-single').hide();
                                $('.bg-cleandar').hide();
                                $('.st-bottom').show();

//							//轮播图操作
                                $('.hiSlider3').hiSlider({
                                    isFlexible: true,
                                    isSupportTouch: false,
                                    isAuto: false,

                                    titleAttr: function (curIdx) {
                                    	 $('.music i').attr('class','fa fa-volume-up');
                                    	$('.music i').css('background','none');
                                    	var mp = document.getElementById('m-play');
											mp.pause();
											mp.currentTime = 0;
									        mp = null;
                                        $('.ck-num').html(mainData.data[0].totalthumbup);
                                        $('#m-play').replaceWith('<audio id="m-play" onended="changeState(this);" preload="auto"><source src =' + mainData.data[curIdx].music +'></source></audio>');
//                                      
                                        $('#music i').css('color','rgb(115,114,112)');
                                      	
                        					
                                        if (mainData.data[curIdx].thumbup == '1') {
                                       		$('#zan').attr('class','fa fa-heart');
                                       	} else{
                                       		$('#zan').attr('class','fa fa-heart-o');
                                       	}
                                       	
                                       	sharelink = mainData.data[0].share_link;
										shareimgUrl = mainData.data[0].picture;
										picname = mainData.data[0].picture;
										var index1 = picname.lastIndexOf("\/");  
										picname = picname.substring(index1 + 1, picname.length);
                                        sharenew(sharelink,shareimgUrl,picname);
                                    }
                                });
								
							
								
                                $('.hiSlider-btn-next').hide();
                                $('.hiSlider-btn-prev').hide();
                                $('.hiSlider-item').css('float', 'none');
								

                            } else {
//					var simage = '';
								
                                for (var i = 0; i < mainData.data.length; i++) {
                                    simage = simage + '<li class="hiSlider-item"><img src=' + mainData.data[i].picture + ' onerror = "nofind()"></li>';
                                }
								
								simage = '<ul class="hiSlider hiSlider3">' + simage + '</ul>'

                                $('#mid').html(simage);
                                $('.bg-cleandar').hide();
                                $('.pika-single').hide();
                                $('.st-bottom').show();

                                //轮播图操作
                                $('.hiSlider3').hiSlider({
                                    isFlexible: true,
                                    isSupportTouch: true,
                                    isAuto: false,
                                    titleAttr: function (curIdx) {
                                    	 $('.music i').attr('class','fa fa-volume-up');
                                    $('.music i').css('background','none');
                                    	var mp = document.getElementById('m-play');
											mp.pause();
											mp.currentTime = 0;
									        mp = null;
                                         
                                        if (curIdx == mainData.data.length) {
                                        	curIdx = 0;
                                      
                                        }
                                       	
                                       	
                                       	
                                       	if (mainData.data[curIdx].thumbup == '1') {
                                       		
                                       		$('#zan').attr('class','fa fa-heart');
                                       	} else{
                                       		$('#zan').attr('class','fa fa-heart-o');
                                       	}
                                       
                                          $('.ck-num').html(mainData.data[curIdx].totalthumbup);
                                           $('#m-play').replaceWith('<audio id="m-play" onended="changeState(this);" preload="auto"><source src =' + mainData.data[curIdx].music +'></source></audio>');
//                                  		
		                                $('#music i').css('color','rgb(115,114,112)');
		                               	sharelink = mainData.data[curIdx].share_link;
										shareimgUrl = mainData.data[curIdx].picture;
										picname = mainData.data[curIdx].picture;
										var index1 = picname.lastIndexOf("\/");  
										picname = picname.substring(index1 + 1, picname.length);
                                        sharenew(sharelink,shareimgUrl,picname);
                                    }
                                });
								isslider = true;
                                $('.hiSlider-btn-next').show();
                                $('.hiSlider-btn-prev').show();
                                $('.hiSlider-item').css('float', 'left');


                            }


                        }, 'json');


                    }


                }


                return r = r < 10 ? "0" + r : r, i = i < 10 ? "0" + i : i, p(this._d) ? t ? window.moment(this._d).format(e || this._o.format) : n + "-" + r + "-" + i : ""
            },
            getMoment: function () {
                return t ? e(this._d) : null
            },
            setMoment: function (n) {
                t && e.isMoment(n) && this.setDate(n.toDate())
            },
            getDate: function () {
                return p(this._d) ? new Date(this._d.getTime()) : null
            },
            setDate: function (e, t) {
                if (!e) return this._d = null;
                typeof e == "string" && (e = new Date(Date.parse(e)));
                if (!p(e)) return;
                var n = this._o.minDate,
                    r = this._o.maxDate;
                p(n) && e < n ? e = n : p(r) && e > r && (e = r), this._d = new Date(e.getTime()), m(this._d), this.gotoDate(this._d), this._o.field && (this._o.field.value = this.toString(), u(this._o.field, "change", {
                    firedBy: this
                })), !t && typeof this._o.onSelect == "function" && this._o.onSelect.call(this, this.getDate())
            },
            gotoDate: function (e) {
                if (!p(e)) return;
                this._y = e.getFullYear(), this._m = e.getMonth()
            },
            gotoToday: function () {
                this.gotoDate(new Date)
            },
            gotoMonth: function (e) {
                isNaN(e = parseInt(e, 10)) || (this._m = e < 0 ? 0 : e > 11 ? 11 : e, this.draw())
            },
            nextMonth: function () {
                ++this._m > 11 && (this._m = 0, this._y++), this.draw();

            },
            prevMonth: function () {
                --this._m < 0 && (this._m = 11, this._y--), this.draw();


            },
            gotoYear: function (e) {
                isNaN(e) || (this._y = parseInt(e, 10), this.draw())
            },
            setMinDate: function (e) {
                this._o.minDate = e
            },
            setMaxDate: function (e) {
                this._o.maxDate = e
            },
            draw: function (e) {
                if (!this._v && !e) return;
                var t = this._o,
                    n = t.minYear,
                    r = t.maxYear,
                    s = t.minMonth,
                    o = t.maxMonth;
                this._y <= n && (this._y = n, !isNaN(s) && this._m < s && (this._m = s)), this._y >= r && (this._y = r, !isNaN(o) && this._m > o && (this._m = o)), this.el.innerHTML = N(this) + this.render(this._y, this._m), t.bound && (this.adjustPosition(), t.field.type !== "hidden" && i(function () {
                    t.trigger.focus()
                }, 1));
//              if (typeof this._o.onDraw == "function") {
//                  var u = this;
//                  i(function () {
//                      u._o.onDraw.call(u)
//                  }, 0)
//              }
				$('.pika-prev').attr('disabled','disabled');
				$('.pika-next').attr('disabled','disabled');
				$('.music i').css('background','none');
				 $('.music i').attr('class','fa fa-volume-up');
		 		var timestrap = new Date();
                var url = "{:U('Home/Wheel/getSignCalendar')}"+"?timestrap="+timestrap.getTime().toString();
                //获取日期参数
                var year = this._y;
                var myMonth = this._m + 1;

				
			        myYear = year;
			        myMont = myMonth;
			    
                var yemo = year + '-' + myMonth;
                var dtime = {sign_date: yemo};

                //数据请求
                if(window.sendRequest){
                    $.post(url, dtime, function (data) {

                        mainArray = data.sign_date;

                        if (data.code == '1') {
                            //将数组字符串分割
                            var arr = [];
                            $.each(data.sign_date, function (k, v) {
                                arr[k] = v.substring(v.length-2, v.length);
                                arr[k] = parseInt(arr[k]);
                            });

                            $('.pika-table tr td button').each(function (k, v) {
                                var btday = $(this).text();
                                btday=parseInt(btday);
                                if ($.inArray(btday, arr) == '-1') {
                                    $(v).removeClass();
                                    $(v).addClass('day-signed');
                                    $(v).addClass('pika-button');

                                } else {
                                    $(v).removeClass();
                                    $(v).addClass('signing');
                                    $(v).addClass('pika-button');
                                }
                            });

//              $('.is-today button').css('background-color', '#4CDB6F');

                        } else {
                            showMsg(data.msg);
                            return;
                        }
                        $('.pika-prev').removeAttr('disabled');
                        $('.pika-next').removeAttr('disabled');

                    }, 'json');
                }
                window.sendRequest = true;


            },
            adjustPosition: function () {
                var e = this._o.trigger,
                    t = e,
                    n = this.el.offsetWidth,
                    i = this.el.offsetHeight,
                    s = window.innerWidth || r.documentElement.clientWidth,
                    o = window.innerHeight || r.documentElement.clientHeight,
                    u = window.pageYOffset || r.body.scrollTop || r.documentElement.scrollTop,
                    a, f, l;
                if (typeof e.getBoundingClientRect == "function") l = e.getBoundingClientRect(), a = l.left + window.pageXOffset, f = l.bottom + window.pageYOffset;
                else {
                    a = t.offsetLeft, f = t.offsetTop + t.offsetHeight;
                    while (t = t.offsetParent) a += t.offsetLeft, f += t.offsetTop
                }
                a + n > s && (a = a - n + e.offsetWidth), f + i > o + u && (f = f - i - e.offsetHeight), this.el.style.cssText = "position:absolute;";

                var ht = $('.pika-table td').css('width');
                $('.pika-table td').css('height', ht.toString());
            },
            render: function (e, t) {
                var n = this._o,
                    r = new Date,
                    i = v(e, t),
                    s = (new Date(e, t, 1)).getDay(),
                    o = [],
                    u = [];
                m(r), n.firstDay > 0 && (s -= n.firstDay, s < 0 && (s += 7));
                var a = i + s,
                    f = a;
                while (f > 7) f -= 7;
                a += 7 - f;
                for (var l = 0, c = 0; l < a; l++) {
                    var h = new Date(e, t, 1 + (l - s)),
                        d = n.minDate && h < n.minDate || n.maxDate && h > n.maxDate,
                        y = p(this._d) ? g(h, this._d) : !1,
                        b = g(h, r),
                        w = l < s || l >= i + s;
                    u.push(E(1 + (l - s), y, b, d, w)), ++c === 7 && (o.push(S(u, n.isRTL)), u = [], c = 0)
                }

                return C(n, o);


            },
            isVisible: function () {
                return this._v
            },
            show: function () {
                this._v || (this._o.bound && s(r, "click", this._onClick), c(this.el, "is-hidden"), this._v = !0, this.draw(), typeof this._o.onOpen == "function" && this._o.onOpen.call(this))


            },
            hide: function () {
//			var e = this._v;
//			e !== !1 && (this._o.bound && o(r, "click", this._onClick), this.el.style.cssText = "", l(this.el, "is-hidden"), this._v = !1, e !== undefined && typeof this._o.onClose == "function" && this._o.onClose.call(this))
            },
            destroy: function () {
//			this.hde(), o(this.el, "mousedown", this._onMouseDown, !0), o(this.el, "change", this._onChange), this._o.field && (o(this._o.field, "change", this._onInputChange), this._o.bound && (o(this._o.trigger, "click", this._onInputClick), o(this._o.trigger, "focus", this._onInputFocus), o(this._o.trigger, "blur", this._onInputBlur))), this.el.parentNode && this.el.parentNode.removeChild(this.el)
            }
        }, k
    });
</script>

<script type="text/javascript">
    //日历
    var picker = new Pikaday(
        {
            field: document.getElementById('datepicker'),
            firstDay: 1,
            minDate: new Date('2010-01-01'),
            maxDate: new Date('3020-12-31'),
            yearRange: [2000, 3020]
        });

    $('#datepicker').hide();
    $('.pika-single').hide();

$('.fa-home').click(function(){
	window.history.go(-1);
});
    //点赞处理
    	
    $('#zan').click(function () {
			
        if (isdz) {

            var ds = $(this).attr('class');

            var zcount = $('.ck-num').html();
            var state = 0;
            if (ds == 'fa fa-heart-o icon animated') {
                state = 1;

            } else {
                state = 0;
            }
            var url = "{:U('Home/Ajax/thumbupAction')}";
            var dz = {thumbup: state};
            $.post(url, dz, function (res) {

                if (res.code == 1) {

                    if (ds == 'fa fa-heart-o icon animated') {
                        zcount = parseInt(zcount);
                        zcount = zcount + 1;
                        $('.ck-num').html(zcount);
//                      $('#zan').attr('class', 'fa fa-heart');
                        $('#zan').attr('class', 'fa fa-heart icon animated');
                        $('#zan i').attr('class', 'fa fa-heart fly inline icon animated');


                    } else {
                        zcount = parseInt(zcount);
                        zcount = zcount - 1;
                        $('.ck-num').html(zcount);
//                      $('#zan').attr('class', 'fa fa-heart-o');
                        $('#zan').attr('class', 'fa fa-heart-o icon animated');
                        $('#zan i').attr('class', 'fa fa-heart-o hide1 inline icon animated');
                    }

                } else {
                    showMsg(res.msg);
                }

            }, "json");

        }

    });

	var nowday = new Date();
    var nowyear = nowday.getFullYear();
    var nowmon = nowday.getMonth() + 1;
    var nowtoday = nowday.getDate();
    
    nowyear = nowyear.toString();
    nowmon = nowmon.toString();
    nowtoday = nowtoday.toString();
    if (nowmon < 10) {
        nowmon = '0' + nowmon;
    }
    if (nowtoday < 10) {
        nowtoday = '0' + nowtoday;
    }
    var cktoday = nowyear + nowmon + nowtoday;
    cktoday = parseInt(cktoday);
    
//  if (!window.sessionStorage.getItem("time")){
		window.sessionStorage.setItem("time",cktoday);
//	}
    //点击日历日签
    $('.chistory').click(function () {

        var url = "{:U('Home/Wheel/getSignCalendar')}";
        //获取日期参数
    	
        var yemo = myYear + '-' + myMont;
        var dtime = {sign_date: yemo};

        //数据请求
        $.post(url, dtime, function (data) {
			
			mainArray = data.sign_date;
			
            if (data.code == '1') {
                //将数组字符串分割
                var arr = [];
                $.each(data.sign_date, function (k, v) {
                    arr[k] = v.substring(v.length-2, v.length);
                    arr[k] = parseInt(arr[k]);
                });
//          
                $('.pika-table tr td button').each(function (k, v) {
                    var btday = $(this).text();
                    btday=parseInt(btday);
                    if ($.inArray(btday, arr) == '-1') {
                    	$(v).removeClass();
                        $(v).addClass('day-signed');
                        $(v).addClass('pika-button');
						
                    } else {
                    	$(v).removeClass();
                        $(v).addClass('signing');
                        $(v).addClass('pika-button');
                    }
                });
                
//              $('.is-today button').css('background-color', '#4CDB6F');
            } else {
                showMsg(data.msg);
                return;
            }
        }, 'json');
		
		
		$('.hiSlider-btn-next').hide();
        $('.hiSlider-btn-prev').hide();
        $('.pika-single').show();
         $('.bg-cleandar').show();
        $('.bg-cleandar').attr("class","bg-cleandar animated slideInUp");
        $('.st-bottom').hide();
        console.log(window.sessionStorage.getItem("time"))
        console.log(cktoday)
        if (cktoday == window.sessionStorage.getItem("time")){
        	$('.bg-celeander2').addClass("swing animated");
        }else{
        	$('.bg-celeander2').attr("class","bg-celeander2");
        }
        
    });

    //点击消失日历
    $('.sc-close').click(function () {
		
        if (isslider) {
            $('.hiSlider-btn-next').show();
            $('.hiSlider-btn-prev').show();
        }else{
        	$('.hiSlider-btn-next').hide();
            $('.hiSlider-btn-prev').hide();
        }

        $('.bg-cleandar').hide();
        $('.pika-single').hide();
        $("#zan i").removeClass("animated");
        $('.st-bottom').show();
    });
	
	$('.celeander').click(function(){
		 if (isslider) {
            $('.hiSlider-btn-next').show();
            $('.hiSlider-btn-prev').show();
        }else{
        	$('.hiSlider-btn-next').hide();
            $('.hiSlider-btn-prev').hide();
        }

        $('.bg-cleandar').hide();
        $('.pika-single').hide();
        $('.st-bottom').show();
	});

    //音乐播放
    //播放
    $('.music').click(function () {
        var mp = document.getElementById('m-play');
        var cns = $('#music i').css('color');
        if (cns == 'rgb(115, 114, 112)') {
        	
            mp.play();
            var url  = "{:U('Home/Ajax/logAudioPlayBack')}";
            var playback_num ='1';
			$.post(url,{playback_num:playback_num,picture:picname}, function(res){
			});
//          $('.music i').css('color', '#97DEFA');
			$('.music i').attr('class','fa fa-close');
            $('.music i').css('color', 'transparent');
            $('.music i').css('background', 'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQQAAABbCAMAAACieQuuAAAAb1BMVEUAAAB64Px84f164Px64Px64Px64Px/4f164Px64Px84f164Px64Px64Px64Px74P164Px64Px64Px64Px64Px64Px64Px64Px64PyS4/+S4/+S4/+S4/+S4/+S4/+S4/+S4/+S4/+S4/964PyS4//yrM2AAAAAI3RSTlMAwB/wEN9gMHCAQNCwUKBX9pA8+5znh6/PwPCAoBCQcGDQ4MWcbO4AAAYuSURBVHja7VxpV9swENThQz5zERJCoaXi///GAqLMBieR5d28F97zfCKkHa/HO6uVLKFmzJgxY8aMGVxkdankYX4QqzKN977JhFnLd1athLHevrH2ShyLjX9HJct6H1gLWdY7sIpC+4BGlHXvA7RoyuY+oFWiMNb/h2TSLv0ncsmUDaziLnMeELTCVVjvQKqFrQBIWgEQtAKgha0ASFoBELRCXISV9zqbYAVA0gqAnBXiIlQeY32SFQBJKwCCVgD0pVvq060ASFoBkLNCXIQ2fFskWwGQtAIgZ4W4CHX41ppUKwASVpBnNVsfEwEo0PclWQHgJ22c1em+TO3poyJkb6yfD78P37vEpAXYSRtnXfk3pKiwO02qB3ltA2vWwBAJSQuw63ecNURYcqwwFMEE1jAylv4DfTRp5UVwI1m9TxnJ3caPFQG/q8Kn+sIQlnvPEIHHioK8GlUNULnidsBaQJZfbqwdghUU4X47khWW9V28xECCiAjhvlFsuvOpYO73SC62CGDNfQQnB6Y8Y7AOn3Np6cioh0sO63ut9RaeZYnAZ60vGWJ998ZqN3FSfbo/qOglDGiRq6PCfXx4+JNo1zhr1mvdYZREiMdw41l1YG1rNMxkhNDHOt/5BLxr8PqGXyqCVNb+q6GHgftIFxsXoT1iteTG66AIZghp4T68vuM5UglTWTWmNShcZpqyEMEfsTrKmtOvNqnh/nr9wEVHGJ8ETO66SxPetU8VAUMCufGKKNJC3KRwn16CCmWkk00Airc1R7UxUxR5oghg/eQpiAcycoVtcrjq6fAhwsuTOotlIivi1UiFwSRnkygCWFulBh5okXqb9HBVGVR4VGfh00AfvqNVoWGwajowdjQVWvLzamq46ncwhBEVQVVfqYuHZrgiqBXtvDILDxjIPCHcrxHil6wIqgl1iwbv2CJkOWXtiR+aIMjkcA1SQVCEejjfbXkigDWnLuuJzPXkcNUjqoKICMPnpCwqOUcEtCAYE3JSFKpp4WKE+CsrAmyK6l3yREAqtFSRDLnWTw33q2UqBUVAKmSkTnZMEXDjinoAfJoRbvkhwm9BEWDZjjzAiikC8r4mPxcYgBpGuOqAGYSMCPiPFfHGiikCmNyRtMiQieFilHyQFkHDvshWrggqJ9KKivB4PRG0sAhDadubFqEVFCEqLV+E55+WCUesN10TmqvUBEtW20VrwgGzB/nRAeH2YqNDdWZ0uNE+obhin9AFVqSdvdGO0ZD1r0K4Y6wGHeNNzx16hMsToRzOHQyu1nJnkc9XmUU6uqoiPIukc9OaOYs0B+n1BDwym5Gs0FLrCZZ+aOkM7ZZXlip8EF9ZctQZU8KFGQ5GVoTViTXGki1Ce7R92oYbB52dutq8eL3GanNxYrU5V1wR3InV5oZcoZ3y3gEr7i/qPGw6a43QkasV670DlO0H7x2wljfpDZQ5wAyyb6BgBrw6p9DJInTHe38Kco2MOmOZGm4dzFCrCzBpD+0rXFteehdpkkWowIpEWA2coRbJzyzyPnbau+4a1kUWm+nvupEJ0KCirA3cABXGuzeiwYR4P3sE+20nQc/a9aCDtNDA2MFEymbYX5hYwp5/P6ko1oms3arIvm3CNixW/Z21wX2f9Jtzbqe3gnuWwGoTWeGl6iyr1jZxzxLM4M4UXui8W4qJACwSWctRO7AXepkkQnf02wYfTumgBUUA634kKwqCL+Pq5iNFGGwCKWJbWo3miMBn1TBDnHU/VoRPvQqqs07aMw2o6VjblL3NeizrMi4CLNYPCu+Ujk9xoMeJkHhSaz9GhIyydtgsOmmju2LBbUaed8hL1oEiiABWaGDQoU87nMA/pxNnNVXHN9pwb3NVH/ULvpt8TEVxsYuwyhltr05jFTlPHreEzB8hkGd1Hrh8wr/zETPELaH4MNursNqRIrSxFiFuCSWBXYRVxhL5pX9Wcc7wyf1dDnlWN0qEghaEaZZQgKAlrnLCf3tOqyYveIcZlRR2EVa+JaySBLWEIOvmGqyOL0LcEgqQs8RGktVeSQRYYinKuoN7BaFRGCWBydpOAXKWuFOAnCWckocWFherDHtx1hys0lgYpdRPYVUzZsyYMWPGDCb+AcHujlfI5hyBAAAAAElFTkSuQmCC")');
           $('.music i').css('background-size', '300% 100%');
        } else {
        	
        	mp.pause();
            mp.currentTime = 0;
            mp = null;
        	$('.music i').attr('class','fa fa-volume-up');
            $('.music i').css('background', 'none');
            $('.music i').css('color', 'rgb(115, 114, 112)');
        }
    });


	window.onload= function(){
		var time3 = new Date().getTime();
		var loadtime = time3 - time1;
		loadtime = loadtime.toFixed(4);
		loadtime = loadtime.toString();
		console.log(loadtime);

		$.ajax({
			type:"post",
			url:"{:U('Home/Ajax/countPageloadtime')}",
			dataType:'json',
			data:{pageloadtime:loadtime},
			async:false
		});
	}
		
		
	window.onpagehide = function(){		
		var time2 = new Date().getTime();
		var stime = time2 - time1;
		stime = stime/1000;
		stime = stime.toFixed(1);
        stime = stime.toString();
		var hide = "{$hide}";
		
		if (hide!=1) {
			$.ajax({
				type:"post",
				url:"{:U('Home/Ajax/calculateDuration')}",
				dataType:'json',
				data:{duration:stime},
				async:false
			});
		}
	}
	
	setInterval(function(){
		document.body.scrollTop = 0;
	},100);
	
</script>
<include file="Public:footer"/>
